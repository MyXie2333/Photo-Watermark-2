# PhotoWatermark2

## 项目预览

<div align="center">
  <table>
    <tr>
      <td style="padding: 10px;"><img src="demo1.png" alt="演示图片1" style="max-width: 100%; height: auto;"></td>
      <td style="padding: 10px;"><img src="demo2.png" alt="演示图片2" style="max-width: 100%; height: auto;"></td>
      <td style="padding: 10px;"><img src="demo3.png" alt="演示图片3" style="max-width: 100%; height: auto;"></td>
    </tr>
  </table>
</div>

## 项目介绍
PhotoWatermark2 是一款功能强大、易于使用的图形化水印添加工具，专为摄影师、设计师和需要批量处理图片的用户打造。基于 PyQt5 和 Pillow 开发，提供了丰富的水印样式选项和直观的操作界面。

## 功能特性

### 导入管理
- **多格式支持**：支持 JPG、PNG、BMP 等多种常见图片格式
- **灵活导入**：支持单张导入、批量导入和文件夹导入
- **缩略图预览**：直观的图片列表展示和缩略图预览
- **信息显示**：显示图片基本信息和处理状态

### 文本水印
- **内容自定义**：支持任意文本内容输入
- **丰富的字体设置**：
  - 支持系统已安装的几种基本中英文字体选择
  - 字号调节
  - 粗体/斜体样式切换
  - 中文字体智能加载
- **颜色与透明度**：
  - 调色板选择字体颜色
  - 0-100% 透明度调节
- **高级特效**：
  - 阴影效果（颜色、偏移、模糊度调节）
  - 描边效果（颜色、偏移、宽度调节）
- **旋转功能**：0-360度自由旋转

### 图片水印
- **图片导入**：支持从本地选择图片作为水印
- **透明通道支持**：完全支持带透明通道的 PNG 图片
- **缩放控制**：按比例缩放、自由缩放
- **透明度调节**：0-100% 透明度调节
- **旋转功能**：0-360度自由旋转

### 水印布局
- **实时预览**：主预览窗口实时显示水印效果
- **九宫格定位**：一键定位到预设位置（左上、右上、中心等9个位置）
- **拖拽调整**：支持鼠标拖拽水印到任意位置（实时预览）
- **精确坐标**：显示并支持输入精确坐标

### 模板管理
- **模板保存**：将当前水印设置保存为模板
- **分类存储**：文本模板和图片模板分类管理
- **模板加载**：快速应用已保存的模板
- **模板搜索**：支持搜索已保存的模板
- **默认模板**：可设置默认模板和启动时自动加载

### 导出功能
- **单张导出**：导出当前编辑的图片
- **批量导出**：一次性处理并导出多张图片
- **格式选择**：支持保留原格式、JPEG、PNG 等导出格式
- **命名规则**：支持原文件名、前缀、后缀、自定义命名
- **JPEG 质量**：0-100% 质量调节
- **尺寸调整**：支持多种缩放方式（按宽度、高度、百分比、自定义）

## 系统要求
- **操作系统**：Windows 7/10/11
- **内存**：推荐 4GB 及以上
- **硬盘空间**：至少 100MB 可用空间
- **分辨率**：支持 1080p 及以上分辨率（最佳体验）

## 安装与使用

### 方法一：直接运行（推荐）
前往 `release` ，下载并双击 `PhotoWatermark2.exe` 文件即可运行程序。

### 方法二：从源码运行
1. 确保已安装 Python 3.8 或更高版本
2. 安装依赖：`pip install -r requirements.txt`
3. 运行程序：`python run_app.py`

## 项目结构
```
├── .gitignore           # Git忽略配置文件
├── MARBLES.bmp          # 示例图片文件
├── README.md            # 项目文档
├── docs/                # 项目文档目录
│   ├── PRD.md           # 产品需求文档
│   └── 开发计划.md       # 开发计划文档
├── requirements.txt     # 项目依赖管理文件
├── run_app.py           # 程序运行脚本
└── src/                 # 源代码目录
    ├── ui/              # UI组件和界面
    │   ├── __init__.py  # 模块初始化文件
    │   ├── export_dialog.py  # 导出设置对话框
    │   ├── image_list_widget.py  # 图片列表组件
    │   ├── image_watermark_widget.py  # 图片水印设置组件
    │   ├── main_window.py  # 主窗口界面
    │   ├── template_manager_dialog.py  # 模板管理对话框
    │   └── text_watermark_widget.py  # 文本水印设置组件
    ├── utils/           # 工具函数目录
    ├── config_manager.py # 配置管理器
    ├── image_manager.py  # 图片管理器
    ├── main.py          # 主程序入口
    ├── watermark_renderer.py # 水印渲染器
    └── watermark_drag_manager.py # 水印拖拽管理器
```

## 技术栈
- **Python**：3.8+
- **PyQt5**：GUI框架
- **Pillow**：图像处理
- **NumPy**：数值计算

## 开发状态
当前版本：v1.0.0

所有核心功能已完成开发并通过测试，可以稳定运行。

## 注意事项
对于超大图片（10MB以上）和大批量图片，加载和处理时间有所延长为正常现象，请耐心等待。

## 许可证
[开源协议信息待补充]

## 技术支持
如有任何问题、建议或bug报告，请联系开发者。

## 更新日志
### v1.0.0 (2025年10月11日)
- 初始版本发布
- 实现所有核心功能
- 修复批量导出闪退问题
- 优化大图片处理性能
