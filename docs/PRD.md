# Photo Watermark 2 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
Photo Watermark 2 - Windows图形化水印软件

### 1.2 产品定位
一款面向Windows用户的易用、功能全面的图片水印添加工具，支持批量处理和个性化定制。

### 1.3 目标用户
- 摄影师和摄影爱好者
- 社交媒体内容创作者
- 需要保护图片版权的个人用户
- 小型工作室和企业

## 2. 功能需求

### 2.1 文件处理模块

#### 2.1.1 导入图片
**功能描述**: 支持多种方式导入图片文件

**详细需求**:
- **单张图片导入**:
  - 支持拖拽单个图片文件到应用窗口
  - 支持通过文件选择器选择单个图片
  - 在界面中显示图片缩略图和文件名

- **批量导入**:
  - 支持一次性选择多个图片文件
  - 支持导入整个文件夹（包含子文件夹选项）
  - 显示导入进度和文件数量统计

- **界面显示**:
  - 左侧显示已导入图片的缩略图列表
  - 每个缩略图下方显示文件名
  - 支持图片列表的滚动浏览
  - 点击缩略图可在主预览区显示对应图片

#### 2.1.2 支持格式
**输入格式要求**:
- **必须支持**: JPEG, PNG
- **强烈建议支持**: BMP, TIFF
- **特殊要求**: PNG格式必须支持透明通道处理

**输出格式要求**:
- 用户可选择输出为JPEG或PNG格式
- JPEG格式支持质量调节（压缩率）
- PNG格式保持透明通道完整性

#### 2.1.3 导出图片
**导出设置**:
- **输出路径**:
  - 用户可指定自定义输出文件夹
  - 默认禁止导出到原文件夹（防止覆盖原图）
  - 支持创建新文件夹

- **文件命名规则**:
  - 保留原文件名（默认）
  - 添加自定义前缀（如：wm_原文件名）
  - 添加自定义后缀（如：原文件名_watermarked）
  - 前缀和后缀可同时使用

- **高级导出选项**（可选功能）:
  - JPEG质量调节滑块（0-100）
  - 图片尺寸调整：
    - 按宽度缩放（保持比例）
    - 按高度缩放（保持比例）
    - 按百分比缩放
    - 自定义宽高（可能变形）

### 2.2 水印类型模块

#### 2.2.1 文本水印
**基本功能**:
- **内容输入**: 支持用户自定义任意文本内容
- **字体设置**:
  - 选择系统已安装的字体
  - 字号调节（8pt-72pt）
  - 粗体/斜体样式切换
- **颜色设置**: 提供调色板选择字体颜色
- **透明度调节**: 0-100%透明度滑块

**高级功能**（可选）:
- **阴影效果**:
  - 阴影颜色选择
  - 阴影偏移量调节
  - 阴影模糊度调节
- **描边效果**:
  - 描边颜色选择
  - 描边宽度调节

#### 2.2.2 图片水印（可选高级功能）
**功能描述**: 支持使用图片作为水印

**详细需求**:
- **图片导入**: 从本地选择图片文件作为水印
- **格式支持**: 必须支持带透明通道的PNG图片
- **缩放控制**:
  - 按比例缩放（保持宽高比）
  - 自由缩放（可变形）
  - 精确尺寸输入
- **透明度调节**: 0-100%透明度滑块

### 2.3 水印布局与样式模块

#### 2.3.1 实时预览
**功能要求**:
- 主预览窗口实时显示水印效果
- 支持点击图片列表切换预览不同图片
- 水印参数调整后立即更新预览
- 预览图支持缩放查看（适应窗口/实际尺寸）

#### 2.3.2 位置设置
**预设位置**:
- 九宫格布局：左上、中上、右上、左中、正中、右中、左下、中下、右下
- 一键定位到预设位置
- 显示位置坐标信息

**手动调整**:
- 支持鼠标拖拽水印到任意位置
- 显示水印的精确坐标（X, Y）
- 支持键盘方向键微调位置

#### 2.3.3 旋转功能（可选高级功能）
**旋转控制**:
- 旋转角度滑块（0-360度）
- 角度数值输入框
- 支持正负角度旋转
- 实时预览旋转效果

### 2.4 配置管理模块

#### 2.4.1 水印模板
**模板功能**:
- **保存模板**: 将当前所有水印设置保存为模板
  - 包括：水印内容、字体、颜色、位置、大小、透明度等所有参数
  - 支持模板命名和描述

- **模板管理**:
  - 加载已保存的模板
  - 删除不需要的模板
  - 模板列表显示和搜索

- **启动设置**:
  - 程序启动时自动加载上一次关闭时的设置
  - 可设置默认模板
  - 支持重置为默认设置

## 3. 非功能需求

### 3.1 性能要求
- 图片加载时间：单张图片<2秒（10MB以内）
- 批量处理：支持后台处理，不阻塞UI
- 内存使用：优化大图片处理的内存占用

### 3.2 兼容性要求
- 操作系统：Windows 10/11
- Python版本：3.8+
- 屏幕分辨率：支持1080p及以上

### 3.3 用户体验要求
- 界面简洁直观，学习成本低
- 操作响应及时，无卡顿感
- 提供操作提示和错误信息
- 支持撤销/重做操作

## 4. 界面设计原则

### 4.1 布局结构
- **左侧面板**: 图片列表和导入控制
- **中央区域**: 主预览窗口
- **右侧面板**: 水印设置和控制面板
- **底部状态栏**: 操作提示和进度显示

### 4.2 交互设计
- 拖拽操作优先
- 实时预览反馈
- 一键式常用操作
- 渐进式功能展示（基础功能优先）

## 5. 开发优先级

### 5.1 第一阶段（核心功能）
1. 基础UI框架搭建
2. 单张图片导入和显示
3. 文本水印基础功能
4. 基本导出功能

### 5.2 第二阶段（完整功能）
1. 批量图片处理
2. 图片水印功能
3. 高级布局选项
4. 模板管理

### 5.3 第三阶段（优化完善）
1. 性能优化
2. 用户体验改进
3. 高级特效功能
4. 测试和bug修复

## 6. 验收标准

### 6.1 功能验收
- 所有核心功能正常工作
- 批量处理稳定可靠
- 导出图片质量符合预期
- 模板管理功能完整

### 6.2 性能验收
- 处理速度满足要求
- 内存使用合理
- 界面响应流畅

### 6.3 兼容性验收
- 在目标Windows版本上正常运行
- 支持要求的图片格式
- 界面在不同分辨率下显示正常

---

**文档版本**: v1.0  
**创建日期**: 2024年  
**最后更新**: 2024年